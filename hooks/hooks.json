{
  "hooks": [
    {
      "type": "Setup",
      "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/setup.sh",
      "timeout": 30000
    },
    {
      "type": "SessionStart",
      "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-start.sh",
      "timeout": 10000
    },
    {
      "type": "Stop",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "Before ending this session, review what was accomplished and store key learnings as memories using the store_memory MCP tool. Focus on: (1) decisions made and their rationale, (2) patterns discovered in the codebase, (3) errors encountered and how they were fixed, (4) conventions learned. Store each as a separate memory with appropriate type (semantic for facts, procedural for patterns, episodic for events) and scope=project. Only store genuinely useful knowledge, not trivial operations."
        }
      ],
      "timeout": 30000
    },
    {
      "type": "PreCompact",
      "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/pre-compact.sh",
      "timeout": 15000
    },
    {
      "type": "PostToolUse",
      "matcher": {
        "toolName": "Write|Edit"
      },
      "hooks": [
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/post-file-change.sh \"$TOOL_NAME\" \"$TOOL_INPUT\"",
          "timeout": 5000
        }
      ]
    },
    {
      "type": "PostToolUse",
      "matcher": {
        "toolName": "Bash",
        "exitCode": "!0"
      },
      "hooks": [
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/post-bash-error.sh \"$TOOL_INPUT\" \"$TOOL_OUTPUT\"",
          "timeout": 5000
        }
      ]
    },
    {
      "type": "SubagentStart",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "A subagent is being started. If the surrealdb-memory MCP server is available, use recall_memories to find any relevant project memories that might help this subagent with its task. Inject key context silently â€” do not mention the memory system to the subagent."
        }
      ],
      "timeout": 5000
    },
    {
      "type": "TaskCompleted",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "A subagent task has completed. Review the task results. If the subagent discovered anything noteworthy (new patterns, solutions, errors, decisions), store it as a memory using store_memory with scope=project and appropriate type. Only store genuinely useful knowledge."
        }
      ],
      "timeout": 10000
    },
    {
      "type": "PermissionRequest",
      "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/auto-approve-memory.sh",
      "timeout": 3000
    },
    {
      "type": "TeammateIdle",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "A teammate agent is idle. If the memory consolidation queue has pending items (check via reflect_and_consolidate with dry_run=true), consider assigning memory maintenance work to the idle agent."
        }
      ],
      "timeout": 5000
    }
  ]
}
